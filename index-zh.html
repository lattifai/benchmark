<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini 转录基准测试 - 准确度与时间戳评估</title>
    <meta name="description" content="系统性评估 Gemini 的转录能力：温度参数、URL vs 本地、思考模式及多来源对比。">

    <meta property="og:title" content="Gemini 转录基准测试">
    <meta property="og:description" content="惊人的准确率，失控的时间戳——以及如何修复它们">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg-dark: #0a0a0f;
            --bg-card: #12121a;
            --bg-card-hover: #1a1a2e;
            --green-glow: #10b981;
            --green-light: #34d399;
            --green-bar: #059669;
            --green-bg: rgba(16, 185, 129, 0.08);
            --blue-glow: #3b82f6;
            --blue-light: #60a5fa;
            --purple-glow: #8b5cf6;
            --purple-light: #a78bfa;
            --orange-glow: #f59e0b;
            --orange-light: #fbbf24;
            --red-glow: #ef4444;
            --gray-dim: #4a4a5a;
            --gray-text: #6b7280;
            --text-white: #f9fafb;
            --text-dim: #9ca3af;
            --text-muted: #6b7280;
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-white);
            line-height: 1.7;
        }

        .error-banner {
            background: #991b1b;
            color: white;
            padding: 20px;
            text-align: center;
            font-weight: 600;
        }

        /* Language Switcher */
        .lang-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 200;
            display: flex;
            gap: 4px;
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 4px;
        }

        .lang-btn {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            text-decoration: none;
            color: var(--text-dim);
            transition: all var(--transition-fast);
        }

        .lang-btn:hover {
            color: var(--text-white);
        }

        .lang-btn.active {
            background: var(--green-glow);
            color: white;
        }

        /* Hero */
        .hero {
            padding: 100px 24px 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(ellipse at 50% 0%, rgba(16, 185, 129, 0.08) 0%, transparent 60%);
        }

        .hero-content {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
        }

        .hero-badge {
            display: inline-block;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            padding: 6px 14px;
            border-radius: 100px;
            font-size: 13px;
            font-weight: 500;
            color: var(--green-light);
            margin-bottom: 20px;
        }

        .hero h1 {
            font-size: clamp(28px, 5vw, 48px);
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 16px;
        }

        .hero-subtitle {
            font-size: 18px;
            color: var(--text-dim);
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-highlight {
            display: inline-flex;
            align-items: center;
            gap: 24px;
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px 32px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .highlight-item {
            text-align: center;
        }

        .highlight-value {
            font-size: 28px;
            font-weight: 800;
        }

        .highlight-value.good { color: var(--green-glow); }
        .highlight-value.bad { color: var(--red-glow); }

        .highlight-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .highlight-arrow {
            font-size: 24px;
            color: var(--green-glow);
        }

        .test-data-note {
            margin-top: 32px;
            font-size: 13px;
            color: var(--text-dim);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }

        .test-data-note strong {
            color: var(--text-white);
        }

        /* Navigation */
        .nav {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            padding: 12px 24px;
        }

        .nav-inner {
            max-width: 1100px;
            margin: 0 auto;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-link {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-dim);
            text-decoration: none;
            transition: all var(--transition-fast);
            border: 1px solid transparent;
        }

        .nav-link:hover {
            background: var(--bg-card);
            color: var(--text-white);
        }

        .nav-link.l1 { border-color: rgba(245, 158, 11, 0.3); }
        .nav-link.l2 { border-color: rgba(59, 130, 246, 0.3); }
        .nav-link.l3 { border-color: rgba(139, 92, 246, 0.3); }
        .nav-link.l4 { border-color: rgba(16, 185, 129, 0.3); }

        /* Content */
        .content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 24px 80px;
        }

        /* Metrics Section */
        .metrics-intro {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 60px;
            border: 1px solid rgba(255, 255, 255, 0.06);
        }

        .metrics-intro h2 {
            font-size: 20px;
            margin-bottom: 20px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
            padding: 16px;
        }

        .metric-card-name {
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 4px;
        }

        .metric-card-full {
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .metric-card-desc {
            font-size: 13px;
            color: var(--text-dim);
            line-height: 1.5;
        }

        /* Experiment */
        .experiment {
            margin-bottom: 60px;
        }

        .experiment-header {
            margin-bottom: 24px;
        }

        .experiment-level {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .experiment-level.l1 { background: rgba(245, 158, 11, 0.15); color: var(--orange-light); }
        .experiment-level.l2 { background: rgba(59, 130, 246, 0.15); color: var(--blue-light); }
        .experiment-level.l3 { background: rgba(139, 92, 246, 0.15); color: var(--purple-light); }
        .experiment-level.l4 { background: rgba(16, 185, 129, 0.15); color: var(--green-light); }

        .experiment-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .experiment-meta {
            font-size: 14px;
            color: var(--text-muted);
        }

        .experiment-body {
            background: var(--bg-card);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.06);
            overflow: hidden;
        }

        .experiment-section {
            padding: 24px 28px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }

        .experiment-section:last-child {
            border-bottom: none;
        }

        .section-label {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .section-label.question { color: var(--blue-light); }
        .section-label.setup { color: var(--purple-light); }
        .section-label.findings { color: var(--green-light); }
        .section-label.results { color: var(--orange-light); }
        .section-label.takeaway { color: var(--green-light); }

        .section-content {
            color: var(--text-dim);
            font-size: 15px;
            line-height: 1.7;
        }

        .section-content ul {
            margin: 0;
            padding-left: 20px;
        }

        .section-content li {
            margin-bottom: 8px;
        }

        .section-content strong {
            color: var(--text-white);
        }

        .section-content code {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 13px;
        }

        /* Data Table */
        .table-wrapper {
            overflow-x: auto;
            margin: 0 -8px;
            padding: 0 8px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            min-width: 550px;
        }

        .data-table th {
            background: rgba(255, 255, 255, 0.03);
            padding: 12px 10px;
            text-align: left;
            font-weight: 600;
            color: var(--text-muted);
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            white-space: nowrap;
        }

        .data-table th.metric {
            text-align: right;
            min-width: 80px;
        }

        .data-table td {
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .data-table tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .data-table tr.has-lattifai {
            background: linear-gradient(90deg, rgba(16, 185, 129, 0.06), transparent);
        }

        .model-cell {
            display: flex;
            align-items: center;
            gap: 6px;
            flex-wrap: wrap;
        }

        .model-name {
            font-weight: 500;
            color: var(--text-white);
        }

        .lattifai-badge {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1));
            color: var(--green-light);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
        }

        .metric-cell {
            text-align: right;
            font-variant-numeric: tabular-nums;
        }

        .metric-value {
            font-weight: 600;
        }

        .metric-value.good { color: var(--green-glow); }
        .metric-value.bad { color: var(--red-glow); }
        .metric-value.neutral { color: var(--text-white); }

        .metric-pct {
            color: var(--text-muted);
            font-size: 11px;
        }

        /* Takeaway box */
        .takeaway-box {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05));
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 10px;
            padding: 20px 24px;
        }

        .takeaway-box p {
            color: var(--text-white);
            font-size: 15px;
            font-weight: 500;
            margin: 0;
        }

        /* Note box */
        .note-box {
            background: rgba(59, 130, 246, 0.08);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 10px;
            padding: 16px 20px;
            margin-top: 16px;
            font-size: 13px;
            color: var(--text-dim);
        }

        .note-box strong {
            color: var(--blue-light);
        }

        /* Warning box */
        .warning-box {
            background: rgba(245, 158, 11, 0.08);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 12px;
            padding: 20px 24px;
            margin-top: 40px;
        }

        .warning-box h4 {
            color: var(--orange-light);
            font-size: 15px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .warning-box p {
            font-size: 14px;
            color: var(--text-dim);
            line-height: 1.6;
            margin: 0;
        }

        .warning-box strong {
            color: var(--text-white);
        }

        /* Best Practice */
        .best-practice {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(16, 185, 129, 0.05));
            border: 2px solid rgba(16, 185, 129, 0.3);
            border-radius: 16px;
            padding: 32px;
            text-align: center;
            margin-top: 60px;
        }

        .best-practice h3 {
            font-size: 20px;
            margin-bottom: 16px;
            color: var(--green-light);
        }

        .best-practice-formula {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-white);
            margin-bottom: 16px;
        }

        .best-practice-result {
            display: inline-flex;
            gap: 24px;
            background: var(--bg-dark);
            padding: 16px 32px;
            border-radius: 10px;
        }

        .best-practice-result span {
            font-size: 18px;
            font-weight: 700;
            color: var(--green-glow);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 60px 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.06);
        }

        .footer p {
            color: var(--text-muted);
            font-size: 14px;
            margin-bottom: 20px;
        }

        .footer a {
            color: var(--green-light);
            text-decoration: none;
        }

        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            transition: all var(--transition-normal);
        }

        .btn-primary {
            background: linear-gradient(to right, #7182FF, #06B6D4, #10B981);
            color: white;
        }

        .btn-primary:hover {
            opacity: 0.9;
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-white);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 100px 24px;
            color: var(--text-dim);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(16, 185, 129, 0.2);
            border-top-color: var(--green-glow);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        @media (max-width: 768px) {
            .experiment-section { padding: 20px; }
            .hero-highlight { padding: 16px 20px; gap: 16px; }
            .highlight-value { font-size: 22px; }
            .lang-switcher { top: 10px; right: 10px; }
        }
    </style>
</head>
<body>
    <!-- Language Switcher -->
    <div class="lang-switcher">
        <a href="index.html" class="lang-btn">EN</a>
        <a href="index-zh.html" class="lang-btn active">中文</a>
    </div>

    <div id="error-container"></div>

    <!-- Hero -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-badge">开源基准测试</div>
            <h1>Gemini 转录：惊人的准确率，<br>失控的时间戳</h1>
            <p class="hero-subtitle">
                我们从 4 个维度系统测试了 Gemini 的转录能力。文本质量优秀——但时间戳需要修复。
            </p>
            <div class="hero-highlight">
                <div class="highlight-item">
                    <div class="highlight-value bad">30-300%</div>
                    <div class="highlight-label">原始 DER</div>
                </div>
                <div class="highlight-arrow">→</div>
                <div class="highlight-item">
                    <div class="highlight-value good">9-16%</div>
                    <div class="highlight-label">+LattifAI DER</div>
                </div>
            </div>
            <div class="test-data-note">
                <strong>测试素材：</strong>OpenAI GPT-4o 发布会（约 26 分钟）— 4 位说话人（含 ChatGPT）、频繁打断、语音重叠、观众掌声。每个实验至少运行 2 次以验证稳定性。
            </div>
        </div>
    </section>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-inner">
            <a href="#metrics" class="nav-link">指标说明</a>
            <a href="#layer1" class="nav-link l1">L1: 温度参数</a>
            <a href="#layer2" class="nav-link l2">L2: URL vs 本地</a>
            <a href="#layer3" class="nav-link l3">L3: 思考模式</a>
            <a href="#layer4" class="nav-link l4">L4: 多来源对比</a>
        </div>
    </nav>

    <!-- Content -->
    <div class="content" id="content">
        <div class="loading">
            <div class="loading-spinner"></div>
            <div>正在加载基准测试数据...</div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>所有基准测试均可复现。<a href="https://github.com/lattifai/benchmark" target="_blank">查看源码 →</a></p>
        <div class="cta-buttons">
            <a href="https://lattifai.com" class="btn btn-primary" target="_blank">试用 LattifAI</a>
            <a href="https://github.com/lattifai/benchmark" class="btn btn-secondary" target="_blank">GitHub</a>
        </div>
    </footer>

    <script>
        'use strict';

        function parsePercent(val) {
            const match = val.match(/\(\s*(\d+\.?\d*)%\)/);
            if (!match) throw new Error(`解析错误: ${val}`);
            return parseFloat(match[1]);
        }

        function parseTable(lines) {
            if (lines.length < 3) throw new Error('表格格式无效');
            const results = [];
            for (const row of lines.slice(2)) {
                const cols = row.split('|').map(c => c.trim()).filter(c => c);
                if (cols.length < 4) continue;
                results.push({
                    model: cols[0],
                    der: parsePercent(cols[1]),
                    jer: parsePercent(cols[2]),
                    wer: parsePercent(cols[3]),
                    sca: cols.length > 4 ? parsePercent(cols[4]) : null,
                    hasLattifai: cols[0].includes('+LattifAI')
                });
            }
            return results;
        }

        function extractTables(text) {
            const sections = { main: null, urlLocal: null, thinking: null, temperature: null };
            const pattern = /##### ([^\n]+)\n([\s\S]*?)(?=\n##### |\n## |\n> \*\*Metrics|$)/g;
            let match;

            while ((match = pattern.exec(text)) !== null) {
                const title = match[1].trim();
                const content = match[2];
                const codeBlock = content.match(/```\n?([\s\S]*?)```/);
                if (!codeBlock) continue;

                const lines = codeBlock[1].split('\n').filter(l => l.startsWith('|'));
                if (lines.length === 0) continue;

                const data = parseTable(lines);
                let note = null;
                const noteMatch = content.match(/> \*\*Note[^*]*\*\*:([^>]*)/s);
                if (noteMatch) note = noteMatch[1].trim().replace(/\s+/g, ' ');

                if (title.includes('Main Benchmark')) sections.main = { data, note };
                else if (title.includes('URL vs Local')) sections.urlLocal = { data };
                else if (title.includes('Thinking Mode')) sections.thinking = { data };
                else if (title.includes('Temperature')) sections.temperature = { data };
            }

            for (const [k, v] of Object.entries(sections)) {
                if (!v) throw new Error(`缺少数据: ${k}`);
            }
            return sections;
        }

        function renderTable(data, opts = {}) {
            const hasSCAData = data.some(r => r.sca !== null);
            const showSCA = opts.showSCA !== false && hasSCAData;
            return `
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>模型</th>
                                <th class="metric">DER ↓</th>
                                <th class="metric">JER ↓</th>
                                <th class="metric">WER ↓</th>
                                ${showSCA ? '<th class="metric">SCA ↑</th>' : ''}
                            </tr>
                        </thead>
                        <tbody>
                            ${data.map(r => `
                                <tr class="${r.hasLattifai ? 'has-lattifai' : ''}">
                                    <td>
                                        <div class="model-cell">
                                            <span class="model-name">${r.model.replace(' +LattifAI', '')}</span>
                                            ${r.hasLattifai ? '<span class="lattifai-badge">+LattifAI</span>' : ''}
                                        </div>
                                    </td>
                                    <td class="metric-cell">
                                        <span class="metric-value ${r.der < 15 ? 'good' : r.der > 50 ? 'bad' : 'neutral'}">${r.der.toFixed(2)}</span>
                                        <span class="metric-pct">%</span>
                                    </td>
                                    <td class="metric-cell">
                                        <span class="metric-value ${r.jer < 20 ? 'good' : r.jer > 50 ? 'bad' : 'neutral'}">${r.jer.toFixed(2)}</span>
                                        <span class="metric-pct">%</span>
                                    </td>
                                    <td class="metric-cell">
                                        <span class="metric-value ${r.wer < 5 ? 'good' : r.wer > 10 ? 'bad' : 'neutral'}">${r.wer.toFixed(2)}</span>
                                        <span class="metric-pct">%</span>
                                    </td>
                                    ${showSCA ? `
                                        <td class="metric-cell">
                                            <span class="metric-value ${r.sca === 100 ? 'good' : 'bad'}">${r.sca.toFixed(0)}</span>
                                            <span class="metric-pct">%</span>
                                        </td>
                                    ` : ''}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        function render(sections) {
            document.getElementById('content').innerHTML = `
                <!-- 指标说明 -->
                <section id="metrics" class="metrics-intro">
                    <h2>理解评估指标</h2>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-card-name">DER</div>
                            <div class="metric-card-full">说话人分离错误率</div>
                            <div class="metric-card-desc">衡量时间戳准确度 + 说话人标注。DER > 100% 意味着严重的时间问题。</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-card-name">JER</div>
                            <div class="metric-card-full">Jaccard 错误率</div>
                            <div class="metric-card-desc">更严格的片段边界重叠计算方式。</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-card-name">WER</div>
                            <div class="metric-card-full">词错误率</div>
                            <div class="metric-card-desc">文本准确度。越低 = 转录错误越少。</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-card-name">SCA</div>
                            <div class="metric-card-full">说话人数量准确率</div>
                            <div class="metric-card-desc">模型是否检测到了正确的说话人数量？</div>
                        </div>
                    </div>
                </section>

                <!-- 第一层：温度参数 -->
                <section id="layer1" class="experiment">
                    <div class="experiment-header">
                        <span class="experiment-level l1">第一层</span>
                        <h2 class="experiment-title">温度参数</h2>
                        <p class="experiment-meta">测试素材：5 分钟单说话人音频 • 每个设置运行 2 次</p>
                    </div>
                    <div class="experiment-body">
                        <div class="experiment-section">
                            <div class="section-label question">研究问题</div>
                            <div class="section-content">
                                <p>温度参数控制输出的随机性。<strong>Gemini 默认不允许用户设置（None）</strong>。手动设置温度是否会影响准确度或时间戳稳定性？</p>
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label setup">测试设置</div>
                            <div class="section-content">
                                <ul>
                                    <li>温度值：<code>1.0</code>、<code>0.5</code>、<code>0.1</code></li>
                                    <li>每个设置运行两次以衡量一致性</li>
                                </ul>
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label findings">主要发现</div>
                            <div class="section-content">
                                <ul>
                                    <li><strong>WER 稳定</strong>：所有设置的 WER 都在 1.3-1.9%——温度几乎不影响文本准确度</li>
                                    <li><strong>temp=0.5 不稳定</strong>：DER 在两次运行间从 19% 跳到 30%</li>
                                    <li><strong>temp=0.1 最一致</strong>：两次运行间 DER 仅相差 1.4%</li>
                                    <li><strong>更低 ≠ 更好</strong>：temp=0.1 并不更准确，只是更可复现</li>
                                </ul>
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label results">结果</div>
                            ${renderTable(sections.temperature.data, { showSCA: false })}
                        </div>
                        <div class="experiment-section">
                            <div class="section-label takeaway">结论</div>
                            <div class="takeaway-box">
                                <p>如果需要可复现的结果，使用 <strong>temp=0.1</strong>。对于单次最佳质量，任何设置都可以。</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 第二层：URL vs 本地 -->
                <section id="layer2" class="experiment">
                    <div class="experiment-header">
                        <span class="experiment-level l2">第二层</span>
                        <h2 class="experiment-title">URL vs 本地音频</h2>
                        <p class="experiment-meta">测试素材：OpenAI GPT-4o 发布会（约 26 分钟，多说话人）</p>
                    </div>
                    <div class="experiment-body">
                        <div class="experiment-section">
                            <div class="section-label question">研究问题</div>
                            <div class="section-content">
                                <p>Gemini 接受 YouTube URL 或本地文件。输入方式是否影响质量？视频元数据（标题、描述）是否有帮助？</p>
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label setup">测试设置</div>
                            <div class="section-content">
                                <ul>
                                    <li>相同音频通过 URL vs 本地 MP3</li>
                                    <li>在 Gemini 3 Flash 和 Gemini 3 Pro 上测试</li>
                                    <li>本地输入<strong>没有描述</strong>；URL 有视频元数据</li>
                                    <li><strong>难度升级</strong>：从单人（L1）到 4 人频繁打断 → WER 从 ~1.5% 升至 ~4.5%（3 倍增长）</li>
                                </ul>
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label findings">主要发现</div>
                            <div class="section-content">
                                <ul>
                                    <li><strong>Flash：几乎相同</strong> — DER 相差约 1%（31.86% vs 33.12%）</li>
                                    <li><strong>Pro：URL 模式不稳定</strong> — DER 311% vs 本地的 40%。生成式模型有时会产生远超实际时长的时间戳幻觉（例如在 26 分钟视频中出现 1 小时的时间标记）</li>
                                    <li><strong>元数据无帮助</strong> — URL（有元数据）≈ 本地（无元数据）</li>
                                    <li><strong>说话人识别 100% 准确</strong> — 即使是本地文件（无元数据），模型也正确识别了所有说话人（Mira Murati、Mark Chen、Barret Zoph、ChatGPT）</li>
                                    <li><strong>LattifAI 修复两者</strong> — 全部校正到 11-20% DER 范围</li>
                                </ul>
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label results">结果</div>
                            ${renderTable(sections.urlLocal.data)}
                        </div>
                        <div class="experiment-section">
                            <div class="section-label takeaway">结论</div>
                            <div class="takeaway-box">
                                <p><strong>Flash：</strong>两种方式都可以。<strong>Pro：</strong>始终使用本地文件——URL 模式有严重问题。</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 第三层：思考模式 -->
                <section id="layer3" class="experiment">
                    <div class="experiment-header">
                        <span class="experiment-level l3">第三层</span>
                        <h2 class="experiment-title">思考模式的影响</h2>
                        <p class="experiment-meta">测试素材：OpenAI GPT-4o 发布会</p>
                    </div>
                    <div class="experiment-body">
                        <div class="experiment-section">
                            <div class="section-label question">研究问题</div>
                            <div class="section-content">
                                <p>Gemini 3 引入了思考模式。额外的"推理"时间是否能提升时间戳准确度？</p>
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label findings">主要发现</div>
                            <div class="section-content">
                                <ul>
                                    <li><strong>WER 提升约 1%</strong>：no-think 5-6.5% → think 4.3-4.8%</li>
                                    <li><strong>DER 无变化</strong>：Flash 的两种模式都在 30-33% 左右</li>
                                    <li><strong>Pro 不稳定</strong>：think-URL 失败（311%），no-think-Local 失败（306%）</li>
                                    <li><strong>关键发现</strong>：我们检查了思考输出——它只是一份<em>转录草稿</em>，而非时间戳推理</li>
                                </ul>
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label results">结果</div>
                            ${renderTable(sections.thinking.data)}
                            <div class="note-box">
                                <strong>为什么思考模式对时间戳没有帮助？</strong>从我们观察到的情况来看，"思考"输出似乎是转录草稿，而非时间戳推理。不过，这需要进一步研究——Google 可能没有展示完整的思考过程，或者通过额外的提示词优化可能会有更好的效果。
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label takeaway">结论</div>
                            <div class="takeaway-box">
                                <p><strong>开启思考模式</strong>可获得约 1% 的 WER 提升。但对于时间戳，你仍然需要强制对齐。</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 第四层：多来源对比 -->
                <section id="layer4" class="experiment">
                    <div class="experiment-header">
                        <span class="experiment-level l4">第四层</span>
                        <h2 class="experiment-title">多来源与提示词工程</h2>
                        <p class="experiment-meta">测试素材：OpenAI GPT-4o 发布会 • 多种提示词变体</p>
                    </div>
                    <div class="experiment-body">
                        <div class="experiment-section">
                            <div class="section-label question">研究问题</div>
                            <div class="section-content">
                                <p>Gemini 与 YouTube 自动字幕相比如何？提示词工程能否改善时间戳？</p>
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label setup">测试的提示词变体</div>
                            <div class="section-content">
                                <ul>
                                    <li><strong>dotey</strong>：来自 @dotey 的基础提示词</li>
                                    <li><strong>Precise</strong>：要求毫秒级精度</li>
                                    <li><strong>StartEnd</strong>：同时包含开始和结束时间</li>
                                    <li><strong>SRT V2</strong>：直接输出 SRT 格式</li>
                                </ul>
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label findings">主要发现</div>
                            <div class="section-content">
                                <ul>
                                    <li><strong>Gemini WER 比 YouTube 好 5 倍</strong>：4-5% vs 21%</li>
                                    <li><strong>提示词格式影响 DER 3.6 倍</strong>：Precise 21% vs SRT 77%</li>
                                    <li><strong>SRT 格式适得其反</strong>：SRT 的行宽限制迫使说话人标签被压缩，导致说话人交叉和时间误差放大 → 更差的 DER</li>
                                    <li><strong>YouTube 字幕：DER 172%</strong>：时间戳完全偏离（但可修复）</li>
                                    <li><strong>LattifAI 归一化所有来源</strong>：172% → 15%，77% → 10%，21% → 9%</li>
                                </ul>
                            </div>
                        </div>
                        <div class="experiment-section">
                            <div class="section-label results">结果</div>
                            ${renderTable(sections.main.data)}
                            ${sections.main.note ? `
                                <div class="note-box">
                                    <strong>关于 WER 差异：</strong>${sections.main.note}
                                </div>
                            ` : ''}
                        </div>
                        <div class="experiment-section">
                            <div class="section-label takeaway">结论</div>
                            <div class="takeaway-box">
                                <p>提示词工程对时间戳的<strong>效果有限</strong>——这是架构层面的问题。使用"Precise"提示词获得最佳原始结果，然后应用强制对齐。</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 幻觉警告 -->
                <div class="warning-box">
                    <h4>⚠️ 幻觉问题警告</h4>
                    <p>除了时间戳问题，我们还观察到 Gemini 输出中存在<strong>文本幻觉</strong>现象。在快速说话人切换时（例如人与 ChatGPT 频繁打断的对话），转录文本有时会包含<strong>原始音频中不存在的内容</strong>。这可能是模型在"补全"它认为应该说的内容。对于需要逐字准确的场景（法律、医疗），建议人工复核。</p>
                </div>

                <!-- 最佳实践 -->
                <div class="best-practice">
                    <h3>最佳实践</h3>
                    <div class="best-practice-formula">
                        Gemini 3 Flash + Precise 提示词 + 思考模式 + LattifAI
                    </div>
                    <div class="best-practice-result">
                        <span>WER 4.19%</span>
                        <span>DER 9.29%</span>
                    </div>
                </div>
            `;
        }

        function showError(msg) {
            document.getElementById('error-container').innerHTML = `<div class="error-banner">错误: ${msg}</div>`;
            document.getElementById('content').innerHTML = `<div style="text-align:center;padding:100px 24px;color:#ef4444;"><h2>加载失败</h2><p style="margin-top:16px;color:var(--text-dim);">${msg}</p></div>`;
        }

        async function load() {
            const res = await fetch('README.md');
            if (!res.ok) throw new Error(`获取失败: ${res.status}`);
            const text = await res.text();
            if (!text.includes('#### Results')) throw new Error('缺少 "#### Results"');
            render(extractTables(text));
        }

        window.addEventListener('load', () => load().catch(e => showError(e.message)));
    </script>
</body>
</html>
